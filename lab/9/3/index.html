<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Lab 9 - IST 363 - Advanced Web Development</title><meta name="gridsome:hash" content="9f64ffdcea9fe2a9c937be9fc75068084ec1fd5e"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.12"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9cf0f6d81cc06611e2b31acc39ba41b4.png"><link data-vue-tag="ssr" rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link data-vue-tag="ssr" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css"><link rel="preload" href="/assets/css/0.styles.cb6d46c9.css" as="style"><link rel="preload" href="/assets/js/app.fdde36f2.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-lab-instructions-vue.c3d2fe3c.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.36003f05.js"><link rel="prefetch" href="/assets/js/page--src-pages-about-vue.44668dd2.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.e351a5f4.js"><link rel="prefetch" href="/assets/js/page--src-pages-project-vue.014484b9.js"><link rel="prefetch" href="/assets/js/page--src-pages-schedule-vue.f3d13047.js"><link rel="prefetch" href="/assets/js/page--src-pages-weeks-vue.738eb0d4.js"><link rel="prefetch" href="/assets/js/page--src-templates-week-schedule-vue.a9d72878.js"><link rel="stylesheet" href="/assets/css/0.styles.cb6d46c9.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app" data-v-0c39e30d><div data-app="true" id="ist-v-app" class="v-application v-application--is-ltr theme--light" data-v-0c39e30d><div class="v-application--wrap"><nav class="v-navigation-drawer v-navigation-drawer--clipped v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100vh;top:0px;transform:translateX(-100%);width:256px;" data-v-0c39e30d><div class="v-navigation-drawer__content"><img src="/logo.svg" class="logo" data-v-0c39e30d><div class="v-list v-sheet v-sheet--tile theme--light v-list--dense" data-v-0c39e30d><a href="/" tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-home theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>Home</div></div></a><a href="/schedule/" tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-calendar theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>Course Schedule</div></div></a><a href="/weeks/" tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-briefcase-clock theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>Weekly Agenda</div></div></a><a href="/project/" tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-briefcase-clock theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>Course Project</div></div></a><div tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-bookmark theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>Syllabus</div></div></div><a href="/about/" tabindex="0" class="v-list-item v-list-item--link theme--light" data-v-0c39e30d><div class="v-list-item__action" data-v-0c39e30d><i aria-hidden="true" class="v-icon notranslate mdi mdi-account theme--light" data-v-0c39e30d></i></div><div class="v-list-item__content" data-v-0c39e30d><div class="v-list-item__title" data-v-0c39e30d>About the Instructor</div></div></a></div></div><div class="v-navigation-drawer__border"></div></nav><header class="v-sheet v-sheet--tile theme--dark v-toolbar v-app-bar v-app-bar--clipped v-app-bar--fixed primary" style="height:64px;margin-top:0px;transform:translateY(0px);left:0px;right:0px;" data-v-0c39e30d><div class="v-toolbar__content" style="height:64px;"><button type="button" class="v-app-bar__nav-icon v-btn v-btn--flat v-btn--icon v-btn--round theme--dark v-size--default" data-v-0c39e30d><span class="v-btn__content"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu theme--dark" data-v-0c39e30d></i></span></button><div class="v-toolbar__title" data-v-0c39e30d>IST 363 - Advanced Web Development</div></div></header><main class="v-content" style="padding-top:3840px;padding-right:0px;padding-bottom:0px;padding-left:0px;" data-v-0c39e30d><div class="v-content__wrap"><div class="container container--fluid fill-height" data-v-417dbc17 data-v-0c39e30d><div class="lab-intructions" data-v-417dbc17><h2 class="accent--text" data-v-417dbc17>Lab 9 step 3</h2><div class="lab-instructions-content" data-v-417dbc17><h1 id="create-a-sketchbook-canvas-for-the-user"><a href="#create-a-sketchbook-canvas-for-the-user" aria-hidden="true"><span class="icon icon-link"></span></a>Create a Sketchbook canvas for the user.</h1>
<p>Open the sketchbook.html file, the html should already be setup for you. You will need to make sure the Firebase scripts and the Konva scripts are loaded on the page.</p>
<p>Follow the sample code for the Konva <a href="https://konvajs.org/docs/sandbox/Free_Drawing.html" target="_blank" rel="nofollow noopener noreferrer">free drawing application</a>. This shows you how to create a simple free drawing application.</p>
<p>Once you get the code working, refactor it into it's own function. You should also move a few of the variables to a global scope and move the event listener to the global scope also.</p>
<p>You code will look similar to the following</p>
<pre><code>var width = window.innerWidth;
var height = window.innerHeight - 25;

// set up Konva
var stage;

var isPaint = false;
var mode = 'brush';
var lastLine;


function initKonva() {
      
      stage = new Konva.Stage({
            container: 'sketchBook',
            width: width,
            height: height
        });

      var layer = new Konva.Layer();
      stage.add(layer);

      stage.on('mousedown touchstart', function(e) {
        isPaint = true;
        var pos = stage.getPointerPosition();
        lastLine = new Konva.Line({
          stroke: '#df4b26',
          strokeWidth: 5,
          globalCompositeOperation:
            mode === 'brush' ? 'source-over' : 'destination-out',
          points: [pos.x, pos.y]
        });
        layer.add(lastLine);
      });

      stage.on('mouseup touchend', function() {
        isPaint = false;
      });

      // and core function - drawing
      stage.on('mousemove touchmove', function() {
        if (!isPaint) {
          return;
        }

        const pos = stage.getPointerPosition();
        var newPoints = lastLine.points().concat([pos.x, pos.y]);
        lastLine.points(newPoints);
        layer.batchDraw();
      });
}

// Setup Event Listeners
var select = document.getElementById('tool');
select.addEventListener('change', function() {
  mode = select.value;
});

// Because we need to call the function
initKonva();
</code></pre>
</div><!----><!----></div><div class="actions" data-v-417dbc17><a href="/lab/9/2" class="v-btn v-btn--contained v-btn--rounded v-btn--router theme--dark v-size--default secondary" data-v-417dbc17><span class="v-btn__content">Go to step 2 </span></a><a href="/lab/9/4" class="v-btn v-btn--contained v-btn--rounded v-btn--router theme--dark v-size--default secondary" data-v-417dbc17><span class="v-btn__content">Go to step 4 </span></a></div></div></div></main><footer class="v-footer v-sheet v-sheet--tile theme--light v-footer--fixed primary" style="left:0px;right:0px;bottom:0px;" data-v-0c39e30d><span class="white--text" data-v-0c39e30d>Nick Lyga - Syracuse University © 2019</span></footer></div></div></div>
    <script>window.__INITIAL_STATE__={"data":{"labInstructions":{"id":"9-3","step":3,"lab":9,"title":"Lab 9","content":"\u003Ch1 id=\"create-a-sketchbook-canvas-for-the-user\"\u003E\u003Ca href=\"#create-a-sketchbook-canvas-for-the-user\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003ECreate a Sketchbook canvas for the user.\u003C\u002Fh1\u003E\n\u003Cp\u003EOpen the sketchbook.html file, the html should already be setup for you. You will need to make sure the Firebase scripts and the Konva scripts are loaded on the page.\u003C\u002Fp\u003E\n\u003Cp\u003EFollow the sample code for the Konva \u003Ca href=\"https:\u002F\u002Fkonvajs.org\u002Fdocs\u002Fsandbox\u002FFree_Drawing.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Efree drawing application\u003C\u002Fa\u003E. This shows you how to create a simple free drawing application.\u003C\u002Fp\u003E\n\u003Cp\u003EOnce you get the code working, refactor it into it's own function. You should also move a few of the variables to a global scope and move the event listener to the global scope also.\u003C\u002Fp\u003E\n\u003Cp\u003EYou code will look similar to the following\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode\u003Evar width = window.innerWidth;\nvar height = window.innerHeight - 25;\n\n\u002F\u002F set up Konva\nvar stage;\n\nvar isPaint = false;\nvar mode = 'brush';\nvar lastLine;\n\n\nfunction initKonva() {\n      \n      stage = new Konva.Stage({\n            container: 'sketchBook',\n            width: width,\n            height: height\n        });\n\n      var layer = new Konva.Layer();\n      stage.add(layer);\n\n      stage.on('mousedown touchstart', function(e) {\n        isPaint = true;\n        var pos = stage.getPointerPosition();\n        lastLine = new Konva.Line({\n          stroke: '#df4b26',\n          strokeWidth: 5,\n          globalCompositeOperation:\n            mode === 'brush' ? 'source-over' : 'destination-out',\n          points: [pos.x, pos.y]\n        });\n        layer.add(lastLine);\n      });\n\n      stage.on('mouseup touchend', function() {\n        isPaint = false;\n      });\n\n      \u002F\u002F and core function - drawing\n      stage.on('mousemove touchmove', function() {\n        if (!isPaint) {\n          return;\n        }\n\n        const pos = stage.getPointerPosition();\n        var newPoints = lastLine.points().concat([pos.x, pos.y]);\n        lastLine.points(newPoints);\n        layer.batchDraw();\n      });\n}\n\n\u002F\u002F Setup Event Listeners\nvar select = document.getElementById('tool');\nselect.addEventListener('change', function() {\n  mode = select.value;\n});\n\n\u002F\u002F Because we need to call the function\ninitKonva();\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n","path":"\u002Flab\u002F9\u002F3\u002F","start":false,"last":false}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.fdde36f2.js" defer></script><script src="/assets/js/page--src-templates-lab-instructions-vue.c3d2fe3c.js" defer></script>
  </body>
</html>
